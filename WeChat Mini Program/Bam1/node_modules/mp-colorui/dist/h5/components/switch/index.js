import Nerv from "nervjs";
import { Switch, View } from '@tarojs/components';
import Taro from "@tarojs/taro-h5";
import ClSwitch_h5 from "./h5/index";
export default class ClSwitch extends Taro.Component {
  render() {
    const props = this.props;

    const title = props.title;
    const color = props.color || 'green';
    const shapeClassName = props.shape !== 'radius' ? '' : 'radius';
    const type = props.type === 'form' ? 'form' : 'normal';
    const checked = !!props.checked;
    const hasChecked = checked ? 'checked' : '';
    const onChange = e => {
      props.onChange && props.onChange(e.detail.value);
    };
    const switchComponent = <Switch className={`${color} ${hasChecked} ${shapeClassName} sm`} checked={checked} onChange={onChange} />;
    const formSwitchComponent = <View className="cu-form-group">
      <View className="title">{title}</View>
      {switchComponent}
    </View>;
    return Taro.getEnv() === Taro.ENV_TYPE.WEB ? <ClSwitch_h5 {...this.props} /> : type === 'form' ? formSwitchComponent : switchComponent;
  }

}
ClSwitch.options = {
  addGlobalClass: true
};